<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Ù„Ø¹Ø¨Ø© Codenames Ù…ÙˆØ¯Ø±Ù† ÙˆÙØ®Ù… - ØªØ·ÙˆÙŠØ±</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap');
  body {
    font-family: 'Cairo', sans-serif;
    background: linear-gradient(135deg, #1f1f2f, #0b0b1a);
    color: #ddd;
    margin: 0; padding: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    min-height: 100vh;
  }
  header {
    background: #141426;
    padding: 1rem;
    width: 100%;
    text-align: center;
    font-size: 2rem;
    font-weight: 700;
    letter-spacing: 2px;
    box-shadow: 0 5px 15px #0f0;
    color: #0f0;
  }
  main {
    flex-grow: 1;
    max-width: 1000px;
    width: 100%;
    padding: 1rem 2rem;
    display: flex;
    gap: 2rem;
    flex-wrap: wrap;
    justify-content: center;
  }
  .room-section, .game-section {
    background: #222233dd;
    border-radius: 15px;
    padding: 1.5rem 2rem;
    box-shadow: 0 0 15px #0f0a;
  }
  .room-section {
    flex-basis: 300px;
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }
  .room-section label, .room-section input, .room-section button {
    font-size: 1.1rem;
  }
  input[type="text"] {
    border: none;
    border-radius: 10px;
    padding: 0.5rem 1rem;
    background: #0b0b15;
    color: #0f0;
    font-weight: 600;
  }
  input[type="text"]::placeholder {
    color: #055505;
  }
  button {
    border: none;
    border-radius: 10px;
    background: linear-gradient(45deg, #0f0, #0a0);
    color: #111;
    font-weight: 700;
    cursor: pointer;
    padding: 0.7rem 1.3rem;
    transition: background 0.3s ease;
    box-shadow: 0 0 10px #0f0;
  }
  button:hover:not(:disabled) {
    background: linear-gradient(45deg, #0a0, #0f0);
  }
  button:disabled {
    opacity: 0.4;
    cursor: not-allowed;
    box-shadow: none;
  }
  .game-section {
    flex-grow: 1;
    min-width: 600px;
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }
  .turn-indicator {
    font-weight: 700;
    font-size: 1.4rem;
    color: #0f0;
    text-align: center;
  }
  #board {
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    gap: 12px;
    user-select: none;
  }
  .card {
    background: #333;
    border-radius: 12px;
    padding: 1rem;
    text-align: center;
    font-weight: 600;
    font-size: 1.25rem;
    cursor: pointer;
    box-shadow: inset 0 0 10px #000000aa;
    transition: background 0.3s ease, color 0.3s ease;
    color: #ddd;
    position: relative;
  }
  .card.guessed.red {
    background: #b22;
    color: #fff;
    cursor: default;
  }
  .card.guessed.blue {
    background: #2266bb;
    color: #fff;
    cursor: default;
  }
  .card.guessed.neutral {
    background: #666666cc;
    color: #ccc;
    cursor: default;
  }
  .card.guessed.assassin {
    background: #110000cc;
    color: #f33;
    cursor: default;
  }
  .card.show-color.red:not(.guessed) {
    background: #660000cc;
    color: #fff;
  }
  .card.show-color.blue:not(.guessed) {
    background: #0044bbcc;
    color: #fff;
  }
  .card.show-color.neutral:not(.guessed) {
    background: #444444cc;
    color: #ccc;
  }
  .card.show-color.assassin:not(.guessed) {
    background: #330000cc;
    color: #f44;
  }

  .info {
    display: flex;
    justify-content: space-between;
    font-weight: 700;
    font-size: 1.2rem;
    color: #0f0;
  }
  .chat-box {
    background: #111122cc;
    border-radius: 12px;
    flex-basis: 300px;
    display: flex;
    flex-direction: column;
    overflow: hidden;
    box-shadow: 0 0 10px #0f0;
  }
  .chat-messages {
    flex-grow: 1;
    overflow-y: auto;
    padding: 1rem;
    font-size: 1rem;
    color: #0f0;
  }
  .chat-input {
    display: flex;
    gap: 0.5rem;
    padding: 0.7rem 1rem;
    background: #222233;
  }
  .chat-input input {
    flex-grow: 1;
    border: none;
    border-radius: 10px;
    background: #0b0b15;
    color: #0f0;
    padding: 0.5rem 1rem;
    font-weight: 600;
  }
  .chat-input input::placeholder {
    color: #055505;
  }
  .chat-input button {
    background: #0f0;
    color: #111;
    font-weight: 700;
    padding: 0 1rem;
    border-radius: 10px;
  }

  .winner-message {
    font-size: 1.6rem;
    font-weight: 900;
    text-align: center;
    margin-top: 1rem;
    color: #0f0;
  }
  .toggle-spymaster {
    margin: 0 auto 1rem auto;
    background: #070;
    color: #afa;
    font-weight: 700;
    border-radius: 12px;
    padding: 0.5rem 1rem;
    cursor: pointer;
    width: max-content;
    user-select: none;
    box-shadow: 0 0 8px #0f0;
  }
  .toggle-spymaster.active {
    background: #0f0;
    color: #040;
  }
  .pass-turn-btn {
    background: #222222cc;
    color: #0f0;
    font-weight: 700;
    border-radius: 10px;
    padding: 0.5rem 1rem;
    cursor: pointer;
    width: max-content;
    user-select: none;
    margin: 0 auto;
    box-shadow: 0 0 10px #0f0;
    transition: background 0.3s ease;
  }
  .pass-turn-btn:hover {
    background: #0f0;
    color: #111;
  }
</style>
</head>
<body>

<header>Ù„Ø¹Ø¨Ø© Codenames Ù…ÙˆØ¯Ø±Ù† ÙˆÙØ®Ù… - ØªØ·ÙˆÙŠØ±</header>

<main>
  <section class="room-section">
    <label for="usernameInput">Ø§Ø³Ù…Ùƒ (Ù„Ø§Ø¹Ø¨):</label>
    <input id="usernameInput" type="text" placeholder="Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ Ù‡Ù†Ø§" />
    
    <label for="roomNameInput">Ø§Ø³Ù… Ø§Ù„ØºØ±ÙØ©:</label>
    <input id="roomNameInput" type="text" placeholder="Ø§ÙƒØªØ¨ Ø§Ø³Ù… Ø§Ù„ØºØ±ÙØ© Ù‡Ù†Ø§" />
    
    <button id="createRoomBtn">Ø¥Ù†Ø´Ø¦ Ø§Ù„ØºØ±ÙØ©</button>
    <button id="joinRoomBtn">Ø§Ø¯Ø®Ù„ Ø§Ù„ØºØ±ÙØ©</button>

    <div id="playersList" style="margin-top:1rem; font-weight:600;"></div>
  </section>

  <section class="game-section" style="display:none;">
    <div class="turn-indicator" id="turnIndicator">Ø¯ÙˆØ±: ...</div>
    <div class="info">
      <div>Ù…ØªØ¨Ù‚ÙŠ Ø§Ù„Ø£Ø­Ù…Ø±: <span id="redLeft">0</span></div>
      <div>Ù…ØªØ¨Ù‚ÙŠ Ø§Ù„Ø£Ø²Ø±Ù‚: <span id="blueLeft">0</span></div>
    </div>
    <button class="toggle-spymaster" id="toggleSpymasterBtn">Ø´ÙˆÙ Ø§Ù„Ø£Ù„ÙˆØ§Ù† (Ø§Ù„Ù…Ø®Ø¨Ø±)</button>
    <div id="board"></div>
    <button class="pass-turn-btn" id="passTurnBtn" title="Ù…Ø±Ø± Ø§Ù„Ø¯ÙˆØ± Ù„Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø«Ø§Ù†ÙŠ">Ù…Ø±Ø± Ø§Ù„Ø¯ÙˆØ±</button>
    <div class="winner-message" id="winnerMessage" style="display:none;"></div>

    <div class="chat-box">
      <div class="chat-messages" id="chatMessages"></div>
      <div class="chat-input">
        <input id="chatInput" type="text" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„Ø©..." />
        <button id="sendChatBtn">Ø£Ø±Ø³Ù„</button>
      </div>
    </div>
  </section>
</main>

<script>
  // 300 ÙƒÙ„Ù…Ø© Ø¬Ø§Ù‡Ø²Ø© (Ù†ÙØ³ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©ØŒ Ù…Ù‚ØªØµØ±Ø© Ù‡Ù†Ø§ Ø¹Ù„Ù‰ Ø¹Ø¯Ø¯ ÙƒØ¨ÙŠØ± Ø¨Ø³ Ù„Ù„ØªÙˆÙÙŠØ±)
  const words = [
    "Ø´Ù…Ø³", "Ù‚Ù…Ø±", "Ù†Ø¬Ù…", "Ø¨Ø­Ø±", "ØµØ­Ø±Ø§Ø¡", "Ø±Ù…Ù„", "Ø´Ø¬Ø±Ø©", "Ù†Ù‡Ø±", "Ø¬Ø¨Ù„", "Ø³Ù…Ø§Ø¡",
    "Ø·Ø§Ø¦Ø±Ø©", "Ø³ÙŠØ§Ø±Ø©", "Ù‚Ø·Ø§Ø±", "Ù‚Ø§Ø±Ø¨", "Ø¯Ø±Ø§Ø¬Ø©", "ÙƒØªØ§Ø¨", "Ù‚Ù„Ù…", "ÙˆØ±Ù‚Ø©", "Ù…Ø¯Ø±Ø³Ø©", "Ø¬Ø§Ù…Ø¹Ø©",
    "ÙƒÙ„Ø¨", "Ù‚Ø·", "Ø­ØµØ§Ù†", "ÙØ£Ø±", "Ø³Ù…ÙƒØ©", "Ø·Ø§ÙˆÙˆØ³", "Ù†Ø³Ø±", "Ø£Ø³Ø¯", "Ù†Ù…Ø±", "Ø°Ø¦Ø¨",
    "Ø¨ÙŠØª", "Ø´Ø§Ø±Ø¹", "Ø³ÙˆÙ‚", "Ù…Ø³ØªØ´ÙÙ‰", "Ù…Ø·Ø¹Ù…", "Ù…Ø·Ø§Ø±", "Ø­Ø¯ÙŠÙ‚Ø©", "Ø¬Ø³Ø±", "Ø¨Ø±Ø¬", "Ù…ÙƒØªØ¨Ø©",
    "ÙƒØ±Ø©", "Ù…Ø§Ø¡", "Ù†Ø§Ø±", "Ù‡ÙˆØ§Ø¡", "ØªØ±Ø§Ø¨", "Ø«Ù„Ø¬", "Ù…Ø·Ø±", "Ø±ÙŠØ­", "Ø¨Ø±Ù‚", "Ø±Ø¹Ø¯",
    "ÙØ¶Ø©", "Ø°Ù‡Ø¨", "Ø­Ø¯ÙŠØ¯", "Ù†Ø­Ø§Ø³", "Ø±ØµØ§Øµ", "Ø²Ù†Ùƒ", "Ø£Ù„Ù…ÙˆÙ†ÙŠÙˆÙ…", "Ø¨Ù„Ø§ØªÙŠÙ†", "ØªÙŠØªØ§Ù†ÙŠÙˆÙ…", "ÙƒØ±Ø¨ÙˆÙ†",
    "Ù…ÙˆØ³ÙŠÙ‚Ù‰", "Ø±Ø³Ù…", "ØªØµÙˆÙŠØ±", "Ø±Ù‚Øµ", "ØºÙ†Ø§Ø¡", "ØªÙ…Ø«ÙŠÙ„", "Ø£Ø¯Ø¨", "Ø´Ø¹Ø±", "Ù…Ø³Ø±Ø­", "Ø³ÙŠÙ†Ù…Ø§",
    "Ø­ÙˆØª", "Ø¯Ù„ÙÙŠÙ†", "Ù‚Ø±Ø´", "Ø³Ù„Ø­ÙØ§Ø©", "Ø·Ø§Ø¦Ø±", "ÙÙŠÙ„", "Ø²Ø±Ø§ÙØ©", "Ù‚Ø±Ø¯", "Ø¯Ø¨", "Ø«Ø¹Ù„Ø¨",
    "Ø­Ø§Ø³ÙˆØ¨", "Ù‡Ø§ØªÙ", "ÙƒØ§Ù…ÙŠØ±Ø§", "ØªÙ„ÙØ§Ø²", "Ø±Ø§Ø¯ÙŠÙˆ", "Ù…Ø°ÙŠØ§Ø¹", "Ø³Ø§Ø¹Ø©", "Ù…ØµØ¨Ø§Ø­", "Ù…Ø±ÙˆØ­Ø©", "Ø«Ù„Ø§Ø¬Ø©",
    "Ø®Ø¨Ø²", "Ù„Ø­Ù…", "Ø®Ø¶Ø§Ø±", "ÙØ§ÙƒÙ‡Ø©", "Ø­Ù„ÙˆÙ‰", "Ø´ÙˆÙƒÙˆÙ„Ø§ØªØ©", "Ù„Ø¨Ù†", "Ù…Ø§Ø¡", "Ø´Ø§ÙŠ", "Ù‚Ù‡ÙˆØ©"
  ];

  // Ø§Ù„Ø£Ù„ÙˆØ§Ù† ÙˆØ¹Ø¯Ø¯ ÙƒÙ„ ÙØ±ÙŠÙ‚
  const COLORS = {
    RED: "red",
    BLUE: "blue",
    NEUTRAL: "neutral",
    ASSASSIN: "assassin"
  };

  let gameData = null;
  let currentPlayer = null;
  let isSpymasterView = false;
  let chatMessages = [];

  // ØªÙˆÙ„ÙŠØ¯ ÙƒØ±ÙˆØª Ø¹Ø´ÙˆØ§Ø¦ÙŠØ© Ù…Ø¹ Ø§Ù„ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ø±Ø³Ù…ÙŠ
  function generateCards() {
    let selectedWords = [];
    while (selectedWords.length < 25) {
      const w = words[Math.floor(Math.random() * words.length)];
      if (!selectedWords.includes(w)) selectedWords.push(w);
    }

    // ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ø£Ù„ÙˆØ§Ù†
    let colors = [];
    // 9 Ù„Ùƒ ÙØ±ÙŠÙ‚ ÙŠØ¨Ø¯Ø£ (Ù†ÙØªØ±Ø¶ Ø§Ù„Ø£Ø­Ù…Ø±)
    for (let i = 0; i < 9; i++) colors.push(COLORS.RED);
    for (let i = 0; i < 8; i++) colors.push(COLORS.BLUE);
    for (let i = 0; i < 7; i++) colors.push(COLORS.NEUTRAL);
    colors.push(COLORS.ASSASSIN);
    // Ø®Ù„Ø· Ø§Ù„Ø£Ù„ÙˆØ§Ù†
    for (let i = colors.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [colors[i], colors[j]] = [colors[j], colors[i]];
    }

    let cards = selectedWords.map((word, i) => ({
      word,
      color: colors[i],
      guessed: false,
    }));

    return cards;
  }

  // Ø¨Ù†Ø§Ø¡ Ø§Ù„Ù„ÙˆØ­Ø© Ø¹Ù„Ù‰ Ø§Ù„Ù€ DOM
  function buildBoard(cards) {
    const board = document.getElementById("board");
    board.innerHTML = "";
    cards.forEach((card, idx) => {
      const div = document.createElement("div");
      div.className = "card";
      div.textContent = card.word;
      div.dataset.index = idx;
      if (card.guessed) div.classList.add("guessed", card.color);
      if (isSpymasterView && !card.guessed) div.classList.add("show-color", card.color);
      div.addEventListener("click", () => onCardClick(idx));
      board.appendChild(div);
    });
  }

  function updateInfo() {
    const redLeft = gameData.cards.filter(c => c.color === COLORS.RED && !c.guessed).length;
    const blueLeft = gameData.cards.filter(c => c.color === COLORS.BLUE && !c.guessed).length;
    document.getElementById("redLeft").textContent = redLeft;
    document.getElementById("blueLeft").textContent = blueLeft;
  }

  function setTurnText() {
    const turnIndicator = document.getElementById("turnIndicator");
    turnIndicator.textContent = `Ø¯ÙˆØ±: Ø§Ù„ÙØ±ÙŠÙ‚ ${gameData.turn === COLORS.RED ? "Ø§Ù„Ø£Ø­Ù…Ø±" : "Ø§Ù„Ø£Ø²Ø±Ù‚"}`;
  }

  // Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ ÙƒØ±Øª
  function onCardClick(idx) {
    if (!gameData || gameData.winner) return;
    const card = gameData.cards[idx];
    if (card.guessed) return;
    // Ø¨Ø³ ÙØ±ÙŠÙ‚ Ø§Ù„Ø®ØµÙ… ÙŠÙ‚Ø¯Ø± ÙŠØ®ØªØ§Ø± (ÙŠØ¹Ù†ÙŠ Ù…Ùˆ Ø¯ÙˆØ± Ø§Ù„Ù…Ø®Ø¨Ø±ØŒ Ø¨Ø³ Ù‡Ù†Ø§ Ù†Ø³Ù‡Ù‘Ù„)
    // Ù†Ø³Ù…Ø­ ÙÙ‚Ø· Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ† Ø§Ù„Ø¹Ø§Ø¯ÙŠÙŠÙ† ÙŠØ®ØªØ§Ø±ÙˆÙ† Ø§Ù„ÙƒØ±Øª (Ù…Ùˆ Ø§Ù„Ù…Ø®Ø¨Ø±)
    if (isSpymasterView) return;

    card.guessed = true;

    if (card.color === COLORS.ASSASSIN) {
      gameData.winner = gameData.turn === COLORS.RED ? COLORS.BLUE : COLORS.RED;
      showWinner();
      buildBoard(gameData.cards);
      return;
    }

    // Ø¥Ø°Ø§ Ø®Ù…Ù† Ø§Ù„ÙƒØ±Øª Ù„ÙØ±ÙŠÙ‚Ù‡ØŒ ÙŠØ¨Ù‚Ù‰ Ø¯ÙˆØ±Ù‡
    if (card.color === gameData.turn) {
      // Ø¨Ø³ Ù†Ù‚Øµ Ø¹Ø¯Ø¯ Ø§Ù„ÙƒØ±ÙˆØª ÙˆØªØ´ÙŠÙƒ Ø§Ù„ÙÙˆØ²
      updateInfo();
      if (gameData.cards.filter(c => c.color === gameData.turn && !c.guessed).length === 0) {
        gameData.winner = gameData.turn;
        showWinner();
      }
    } else {
      // ØºÙŠØ± ÙƒØ±Øª Ø§Ù„ÙØ±ÙŠÙ‚ØŒ ÙŠÙ…Ø±Ø± Ø§Ù„Ø¯ÙˆØ± Ù„Ù„Ø®ØµÙ…
      gameData.turn = gameData.turn === COLORS.RED ? COLORS.BLUE : COLORS.RED;
      setTurnText();
      updateInfo();
    }
    buildBoard(gameData.cards);
  }

  function showWinner() {
    const winnerMessage = document.getElementById("winnerMessage");
    winnerMessage.style.display = "block";
    winnerMessage.textContent = `ÙØ§Ø² Ø§Ù„ÙØ±ÙŠÙ‚ ${gameData.winner === COLORS.RED ? "Ø§Ù„Ø£Ø­Ù…Ø±" : "Ø§Ù„Ø£Ø²Ø±Ù‚"}! ğŸ‰`;
  }

  // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©
  function createGame() {
    gameData = {
      cards: generateCards(),
      turn: COLORS.RED,
      winner: null,
      players: []
    };
    updateInfo();
    setTurnText();
    buildBoard(gameData.cards);
    document.querySelector(".game-section").style.display = "flex";
    document.querySelector(".room-section").style.display = "none";
    isSpymasterView = false;
    document.getElementById("toggleSpymasterBtn").classList.remove("active");
    document.getElementById("winnerMessage").style.display = "none";
  }

  // Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ†
  function addPlayer(name) {
    if (!gameData) return;
    if (!gameData.players.includes(name)) gameData.players.push(name);
    updatePlayersList();
  }
  function updatePlayersList() {
    const playersList = document.getElementById("playersList");
    if (!gameData) {
      playersList.textContent = "";
      return;
    }
    playersList.textContent = "Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ†: " + gameData.players.join(" - ");
  }

  // ØªÙØ¹ÙŠÙ„ ÙˆØ¶Ø¹ Ø§Ù„Ù…Ø®Ø¨Ø± (Ø±Ø¤ÙŠØ© Ø§Ù„Ø£Ù„ÙˆØ§Ù†)
  document.getElementById("toggleSpymasterBtn").addEventListener("click", () => {
    if (!gameData) return;
    isSpymasterView = !isSpymasterView;
    document.getElementById("toggleSpymasterBtn").classList.toggle("active", isSpymasterView);
    buildBoard(gameData.cards);
  });

  // Ø²Ø± ØªÙ…Ø±ÙŠØ± Ø§Ù„Ø¯ÙˆØ±
  document.getElementById("passTurnBtn").addEventListener("click", () => {
    if (!gameData || gameData.winner) return;
    gameData.turn = gameData.turn === COLORS.RED ? COLORS.BLUE : COLORS.RED;
    setTurnText();
  });

  // Ø§Ù†Ø´Ø§Ø¡ Ø§Ù„ØºØ±ÙØ©
  document.getElementById("createRoomBtn").addEventListener("click", () => {
    const user = document.getElementById("usernameInput").value.trim();
    if (!user) return alert("Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ ÙŠØ§Ù„ØºØ§Ù„ÙŠ");
    const room = document.getElementById("roomNameInput").value.trim();
    if (!room) return alert("Ø§ÙƒØªØ¨ Ø§Ø³Ù… Ø§Ù„ØºØ±ÙØ©");
    createGame();
    currentPlayer = user;
    addPlayer(user);
  });

  // Ø§Ù„Ø§Ù†Ø¶Ù…Ø§Ù… Ù„Ù„ØºØ±ÙØ© (Ù‡Ù†Ø§ Ø¨Ù†Ø®Ù„ÙŠÙ‡Ø§ Ù†ÙØ³ Ø§Ù„Ø¹Ù…Ù„ÙŠØ© Ù„Ù„Ø¨Ø³Ø§Ø·Ø©)
  document.getElementById("joinRoomBtn").addEventListener("click", () => {
    const user = document.getElementById("usernameInput").value.trim();
    if (!user) return alert("Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ ÙŠØ§Ù„ØºØ§Ù„ÙŠ");
    if (!gameData) return alert("Ù„Ø§ ØªÙˆØ¬Ø¯ ØºØ±ÙØ© ÙØ¹Ø§Ù„Ø©ØŒ Ø£Ù†Ø´Ø¦ ØºØ±ÙØ© Ø£ÙˆÙ„");
    currentPlayer = user;
    addPlayer(user);
  });

  // Ø¯Ø±Ø¯Ø´Ø© Ø¨Ø³ÙŠØ·Ø© Ù…Ø­Ù„ÙŠØ©
  const chatMessagesDiv = document.getElementById("chatMessages");
  function appendChatMessage(user, text) {
    const msgDiv = document.createElement("div");
    msgDiv.textContent = `${user}: ${text}`;
    chatMessagesDiv.appendChild(msgDiv);
    chatMessagesDiv.scrollTop = chatMessagesDiv.scrollHeight;
  }
  document.getElementById("sendChatBtn").addEventListener("click", () => {
    const input = document.getElementById("chatInput");
    const text = input.value.trim();
    if (!text) return;
    appendChatMessage(currentPlayer || "Ù„Ø§Ø¹Ø¨ Ù…Ø¬Ù‡ÙˆÙ„", text);
    input.value = "";
  });
  document.getElementById("chatInput").addEventListener("keydown", (e) => {
    if (e.key === "Enter") {
      document.getElementById("sendChatBtn").click();
    }
  });
</script>

</body>
</html>
